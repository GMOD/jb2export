#!/bin/bash

COPY=${1:-all}
INSTALL=${2:-~/src/jbrowse-components}

TARGET=`pwd`

echo $TARGET;



if [ $COPY = "all" ] || [ $COPY = "core" ]
then
  cd $INSTALL/packages/core
  yarn build && rm -rf $TARGET/node_modules/@jbrowse/core && cp -R dist $TARGET/node_modules/@jbrowse/core;
fi;

if [ $COPY = "all" ] || [ $COPY = "lgv" ]
then
  cd $INSTALL/plugins/linear-genome-view;
  yarn build && rm -rf $TARGET/node_modules/@jbrowse/plugin-linear-genome-view && cp -R dist $TARGET/node_modules/@jbrowse/plugin-linear-genome-view;
fi;

if [ $COPY = "all" ] || [ $COPY = "wiggle" ]
then
  cd $INSTALL/plugins/wiggle
  yarn build && rm -rf $TARGET/node_modules/@jbrowse/plugin-wiggle && cp -R dist $TARGET/node_modules/@jbrowse/plugin-wiggle
fi;

if [ $COPY = "all" ] || [ $COPY = "svg" ]
then
  cd $INSTALL/plugins/svg/
  yarn build && rm -rf $TARGET/node_modules/@jbrowse/plugin-svg && cp -R dist $TARGET/node_modules/@jbrowse/plugin-svg
fi;

cd $TARGET;
